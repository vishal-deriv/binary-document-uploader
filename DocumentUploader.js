(function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports.DocumentUploader=t():e.DocumentUploader=t()})('undefined'==typeof self?this:self,function(){var e=Math.max,t=Math.floor,n=Math.min;return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=46)}([function(e){var t=e.exports='undefined'!=typeof window&&window.Math==Math?window:'undefined'!=typeof self&&self.Math==Math?self:Function('return this')();'number'==typeof __g&&(__g=t)},function(e,t,n){var o=n(16)('wks'),r=n(12),s=n(0).Symbol,l='function'==typeof s,i=e.exports=function(e){return o[e]||(o[e]=l&&s[e]||(l?s:r)('Symbol.'+e))};i.store=o},function(e,t,n){var o=n(8);e.exports=function(e){if(!o(e))throw TypeError(e+' is not an object!');return e}},function(e,t,n){e.exports=!n(7)(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7}}).a})},function(e,t,n){var o=n(5),r=n(15);e.exports=n(3)?function(e,t,n){return o.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var o=n(2),r=n(33),s=n(25),l=Object.defineProperty;t.f=n(3)?Object.defineProperty:function(e,t,n){if(o(e),t=s(t,!0),o(n),r)try{return l(e,t,n)}catch(t){}if('get'in n||'set'in n)throw TypeError('Accessors not supported!');return'value'in n&&(e[t]=n.value),e}},function(e){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e){e.exports=function(e){return'object'==typeof e?null!==e:'function'==typeof e}},function(e,t,n){var o=n(52),r=n(19);e.exports=function(e){return o(r(e))}},function(e,t,n){var o=n(0),r=n(14),s=n(4),l=n(11),i=n(34),a='prototype',c=function(e,t,n){var p,u,d,g,f=e&c.F,h=e&c.G,y=e&c.S,m=e&c.P,x=e&c.B,T=h?o:y?o[t]||(o[t]={}):(o[t]||{})[a],E=h?r:r[t]||(r[t]={}),S=E[a]||(E[a]={});for(p in h&&(n=t),n)u=!f&&T&&void 0!==T[p],d=(u?T:n)[p],g=x&&u?i(d,o):m&&'function'==typeof d?i(Function.call,d):d,T&&l(T,p,d,e&c.U),E[p]!=d&&s(E,p,g),m&&S[p]!=d&&(S[p]=d)};o.core=r,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){var o=n(0),r=n(4),s=n(6),l=n(12)('src'),i=n(48),a='toString',c=(''+i).split(a);n(14).inspectSource=function(e){return i.call(e)},(e.exports=function(e,t,n,i){var a='function'==typeof n;a&&(s(n,'name')||r(n,'name',t));e[t]===n||(a&&(s(n,l)||r(n,l,e[t]?''+e[t]:c.join(t+''))),e===o?e[t]=n:i?e[t]?e[t]=n:r(e,t,n):(delete e[t],r(e,t,n)))})(Function.prototype,a,function(){return'function'==typeof this&&this[l]||i.call(this)})},function(e){var t=0,n=Math.random();e.exports=function(e){return'Symbol('.concat(e===void 0?'':e,')_',(++t+n).toString(36))}},function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e){var t=e.exports={version:'2.6.5'};'number'==typeof __e&&(__e=t)},function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var o=n(14),r=n(0),s='__core-js_shared__',l=r[s]||(r[s]={});(e.exports=function(e,t){return l[e]||(l[e]=t===void 0?{}:t)})('versions',[]).push({version:o.version,mode:n(17)?'pure':'global',copyright:'\xA9 2019 Denis Pushkarev (zloirock.ru)'})},function(e){e.exports=!1},function(e,t,n){var o=n(37),r=n(28);e.exports=Object.keys||function(e){return o(e,r)}},function(e){e.exports=function(e){if(e==void 0)throw TypeError('Can\'t call method on  '+e);return e}},function(e,t,o){var r=o(21);e.exports=function(e){return 0<e?n(r(e),9007199254740991):0}},function(e){var n=Math.ceil;e.exports=function(e){return isNaN(e=+e)?0:(0<e?t:n)(e)}},function(e,t,n){'use strict';var o=n(63),r=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if('function'==typeof n){var s=n.call(e,t);if('object'!=typeof s)throw new TypeError('RegExp exec method returned something other than an Object or null');return s}if('RegExp'!==o(e))throw new TypeError('RegExp#exec called on incompatible receiver');return r.call(e,t)}},function(e,t,n){'use strict';n(64);var o=n(11),r=n(4),s=n(7),l=n(19),i=n(1),a=n(31),c=i('species'),p=!s(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:'7'},e},'7'!==''.replace(e,'$<a>')}),u=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n='ab'.split(e);return 2===n.length&&'a'===n[0]&&'b'===n[1]}();e.exports=function(e,t,n){var d=i(e),g=!s(function(){var t={};return t[d]=function(){return 7},7!=''[e](t)}),f=g?!s(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},'split'===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[d](''),!t}):void 0;if(!g||!f||'replace'===e&&!p||'split'===e&&!u){var h=/./[d],y=n(l,d,''[e],function(e,t,n,o,r){return t.exec===a?g&&!r?{done:!0,value:h.call(t,n,o)}:{done:!0,value:e.call(n,t,o)}:{done:!1}}),m=y[0],x=y[1];o(String.prototype,e,m),r(RegExp.prototype,d,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}}},function(e,t,n){var o=n(8),r=n(0).document,s=o(r)&&o(r.createElement);e.exports=function(e){return s?r.createElement(e):{}}},function(e,t,n){var o=n(8);e.exports=function(e,t){if(!o(e))return e;var n,r;if(t&&'function'==typeof(n=e.toString)&&!o(r=n.call(e)))return r;if('function'==typeof(n=e.valueOf)&&!o(r=n.call(e)))return r;if(!t&&'function'==typeof(n=e.toString)&&!o(r=n.call(e)))return r;throw TypeError('Can\'t convert object to primitive value')}},function(e,t,n){var o=n(5).f,r=n(6),s=n(1)('toStringTag');e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,s)&&o(e,s,{configurable:!0,value:t})}},function(e,t,n){var o=n(16)('keys'),r=n(12);e.exports=function(e){return o[e]||(o[e]=r(e))}},function(e){e.exports=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf']},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){'use strict';var o=n(62)(!0);e.exports=function(e,t,n){return t+(n?o(e,t).length:1)}},function(e,t,n){'use strict';var o=n(42),r=RegExp.prototype.exec,s=String.prototype.replace,l=r,a='lastIndex',c=function(){var e=/a/,t=/b*/g;return r.call(e,'a'),r.call(t,'a'),0!==e[a]||0!==t[a]}(),p=/()??/.exec('')[1]!==void 0;(c||p)&&(l=function(e){var t,n,l,u,i=this;return p&&(n=new RegExp('^'+i.source+'$(?!\\s)',o.call(i))),c&&(t=i[a]),l=r.call(i,e),c&&l&&(i[a]=i.global?l.index+l[0].length:t),p&&l&&1<l.length&&s.call(l[0],n,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(l[u]=void 0)}),l}),e.exports=l},function(e){e.exports={}},function(e,t,n){e.exports=!n(3)&&!n(7)(function(){return 7!=Object.defineProperty(n(24)('div'),'a',{get:function(){return 7}}).a})},function(e,t,n){var o=n(35);e.exports=function(e,t,n){return(o(e),void 0===t)?e:1===n?function(n){return e.call(t,n)}:2===n?function(n,o){return e.call(t,n,o)}:3===n?function(n,o,r){return e.call(t,n,o,r)}:function(){return e.apply(t,arguments)}}},function(e){e.exports=function(e){if('function'!=typeof e)throw TypeError(e+' is not a function!');return e}},function(e,t,n){t.f=n(1)},function(e,t,n){var o=n(6),r=n(9),s=n(53)(!1),l=n(27)('IE_PROTO');e.exports=function(e,t){var n,a=r(e),c=0,i=[];for(n in a)n!=l&&o(a,n)&&i.push(n);for(;t.length>c;)o(a,n=t[c++])&&(~s(i,n)||i.push(n));return i}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var o=n(2),r=n(56),s=n(28),l=n(27)('IE_PROTO'),i=function(){},a='prototype',c=function(){var e,t=n(24)('iframe'),o=s.length,r='<',l='>';for(t.style.display='none',n(40).appendChild(t),t.src='javascript:',e=t.contentWindow.document,e.open(),e.write(r+'script'+l+'document.F=Object'+r+'/script'+l),e.close(),c=e.F;o--;)delete c[a][s[o]];return c()};e.exports=Object.create||function(e,t){var n;return null===e?n=c():(i[a]=o(e),n=new i,i[a]=null,n[l]=e),void 0===t?n:r(n,t)}},function(e,t,n){var o=n(0).document;e.exports=o&&o.documentElement},function(e,t,n){var o=n(37),r=n(28).concat('length','prototype');t.f=Object.getOwnPropertyNames||function(e){return o(e,r)}},function(e,t,n){'use strict';var o=n(2);e.exports=function(){var e=o(this),t='';return e.global&&(t+='g'),e.ignoreCase&&(t+='i'),e.multiline&&(t+='m'),e.unicode&&(t+='u'),e.sticky&&(t+='y'),t}},function(e,t,n){var o=n(19);e.exports=function(e){return Object(o(e))}},function(e,t){'use strict';function n(e,t,n){const o=new Error(t.message||t.message_to_client||t);return o.name=t.code||e,o.passthrough=n,o}function o(e,t){const n=new Uint8Array(e.length+t.length);for(let o=0;o<e.length;o++)n[o]=e[o];for(let o=0;o<t.length;o++)n[o+e.length]=t[o];return n}function r(e){const t=new Uint8Array(s),n=new DataView(t.buffer);return n.setUint32(0,e),t}Object.defineProperty(t,'__esModule',{value:!0}),t.addMetadata=function(e,{uploadId:t,callType:n}){const s=r(t),l=r(n);for(var i=e,a=(e)=>{const t=r(e.length);let n=new Uint8Array([]);return n=o(n,l),n=o(n,s),n=o(n,t),n=o(n,e),n},c=[],p=0;p<i.length;p++)c.push(a(i[p],p,i));return c},t.log=function(e,...t){e&&console.log(`${new Date}:`,...t)},t.createError=n,t.pushToBuffer=o,t.getFile=function(e){const t=Object.assign({},e);return t.buffer=new Uint8Array(e.buffer),t},t.checkOptions=function(e){if(!e)throw Error('Options is required');const t=['filename','buffer','documentType','documentFormat'];for(var o=t,r=(t)=>{if(!(t in e))throw n('InvocationError',`Required option <${t}> is not found in the given options`)},s=0;s<o.length;s++)r(o[s],s,o);if(e.buffer.length>l)throw n('FileSizeError',`The maximum acceptable file size is ${i}`)};const s=4,l=t.MAX_SIZE=8388608,i=t.HUMAN_READABLE_MAX_SIZE='8 MB',a=t.generateChunks=(e,{chunkSize:t=16384})=>{const n=[];for(let o=0;o<e.length;o++){const r=e[o];0==o%t?n.push([r]):n[n.length-1].push(r)}for(var o=n,r=(e)=>new Uint8Array(e),s=[],l=0;l<o.length;l++)s.push(r(o[l],l,o));return s.concat(new Uint8Array([]))}},function(e){var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join('')}}};e.exports=t},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),n(47),n(59),n(60),n(61),n(65),n(66),n(69),n(71),n(73),n(76);var o=n(44),r=n(83),s=function(e){return e&&e.__esModule?e:{default:e}}(r);let l=0;t.default=class{constructor(e){this.config=e,this.clients={},this.wrapConnection()}upload(e){var t=this.config.debug;const n=(0,o.getFile)(e);(0,o.checkOptions)(n),l+=1;const r=new s.default({send:this.send,file:n,reqId:l});return this.clients[l]={client:r},new Promise((e,s)=>{this.clients[l].promise={resolve:e,reject:s},(0,o.log)(void 0!==t&&t,'Uploading started, File options:',n),r.requestUpload()})}wrapConnection(){var e=this.config;const t=e.connection;var n=e.debug;const r=n!==void 0&&n;if(!t||1!==t.readyState)throw(0,o.createError)('ConnectionError','Connection is not ready!');this.connection=t,this.send=(e)=>{(0,o.log)(r,'<Sent>:',e),t.send(e)};const s=t.onmessage;t.onmessage=(e)=>{const n=e.data;(0,o.log)(r,'<Received>:',n);const l=JSON.parse(n);if(s&&(!l.passthrough||!l.passthrough.document_upload))return void s.call(t,e);const i=l.passthrough.document_upload;if(s&&!i)return void s.call(t,e);if(l.req_id in this.clients){var a=this.clients[l.req_id];const e=a.client,t=a.promise;try{const n=e.handleMessage(l);n&&((0,o.log)(r,'Upload successful, upload info:',n),t.resolve(n))}catch(n){t.reject(n),(0,o.log)(r,n)}}}}}},function(e,t,n){'use strict';var o=n(0),r=n(6),s=n(3),l=n(10),i=n(11),a=n(49).KEY,c=n(7),p=n(16),u=n(26),d=n(12),g=n(1),f=n(36),h=n(50),y=n(51),m=n(55),x=n(2),T=n(8),E=n(9),S=n(25),b=n(15),_=n(39),P=n(57),O=n(58),I=n(5),L=n(18),A=O.f,v=I.f,N=P.f,R=o.Symbol,M=o.JSON,C=M&&M.stringify,D='prototype',H=g('_hidden'),B=g('toPrimitive'),w={}.propertyIsEnumerable,G=p('symbol-registry'),F=p('symbols'),Y=p('op-symbols'),U=Object[D],z='function'==typeof R,q=o.QObject,$=!q||!q[D]||!q[D].findChild,V=s&&c(function(){return 7!=_(v({},'a',{get:function(){return v(this,'a',{value:7}).a}})).a})?function(e,t,n){var o=A(U,t);o&&delete U[t],v(e,t,n),o&&e!==U&&v(U,t,o)}:v,X=function(e){var t=F[e]=_(R[D]);return t._k=e,t},W=z&&'symbol'==typeof R.iterator?function(e){return'symbol'==typeof e}:function(e){return e instanceof R},K=function(e,t,n){return e===U&&K(Y,t,n),x(e),t=S(t,!0),x(n),r(F,t)?(n.enumerable?(r(e,H)&&e[H][t]&&(e[H][t]=!1),n=_(n,{enumerable:b(0,!1)})):(!r(e,H)&&v(e,H,b(1,{})),e[H][t]=!0),V(e,t,n)):v(e,t,n)},J=function(e,t){x(e);for(var n,o=y(t=E(t)),r=0,s=o.length;s>r;)K(e,n=o[r++],t[n]);return e},Z=function(e){var t=w.call(this,e=S(e,!0));return this===U&&r(F,e)&&!r(Y,e)?!1:t||!r(this,e)||!r(F,e)||r(this,H)&&this[H][e]?t:!0},Q=function(e,t){if(e=E(e),t=S(t,!0),e!==U||!r(F,t)||r(Y,t)){var n=A(e,t);return n&&r(F,t)&&!(r(e,H)&&e[H][t])&&(n.enumerable=!0),n}},ee=function(e){for(var t,n=N(E(e)),o=[],s=0;n.length>s;)r(F,t=n[s++])||t==H||t==a||o.push(t);return o},te=function(e){for(var t,n=e===U,o=N(n?Y:E(e)),s=[],l=0;o.length>l;)r(F,t=o[l++])&&(!n||r(U,t))&&s.push(F[t]);return s};z||(R=function(){if(this instanceof R)throw TypeError('Symbol is not a constructor!');var e=d(0<arguments.length?arguments[0]:void 0),t=function(n){this===U&&t.call(Y,n),r(this,H)&&r(this[H],e)&&(this[H][e]=!1),V(this,e,b(1,n))};return s&&$&&V(U,e,{configurable:!0,set:t}),X(e)},i(R[D],'toString',function(){return this._k}),O.f=Q,I.f=K,n(41).f=P.f=ee,n(29).f=Z,n(38).f=te,s&&!n(17)&&i(U,'propertyIsEnumerable',Z,!0),f.f=function(e){return X(g(e))}),l(l.G+l.W+l.F*!z,{Symbol:R});for(var ne=['hasInstance','isConcatSpreadable','iterator','match','replace','search','species','split','toPrimitive','toStringTag','unscopables'],oe=0;ne.length>oe;)g(ne[oe++]);for(var j=L(g.store),re=0;j.length>re;)h(j[re++]);l(l.S+l.F*!z,'Symbol',{for:function(e){return r(G,e+='')?G[e]:G[e]=R(e)},keyFor:function(e){if(!W(e))throw TypeError(e+' is not a symbol!');for(var t in G)if(G[t]===e)return t},useSetter:function(){$=!0},useSimple:function(){$=!1}}),l(l.S+l.F*!z,'Object',{create:function(e,t){return t===void 0?_(e):J(_(e),t)},defineProperty:K,defineProperties:J,getOwnPropertyDescriptor:Q,getOwnPropertyNames:ee,getOwnPropertySymbols:te}),M&&l(l.S+l.F*(!z||c(function(){var e=R();return'[null]'!=C([e])||'{}'!=C({a:e})||'{}'!=C(Object(e))})),'JSON',{stringify:function(e){for(var t,n,o=[e],r=1;arguments.length>r;)o.push(arguments[r++]);if(n=t=o[1],(T(t)||void 0!==e)&&!W(e))return m(t)||(t=function(e,t){if('function'==typeof n&&(t=n.call(this,e,t)),!W(t))return t}),o[1]=t,C.apply(M,o)}}),R[D][B]||n(4)(R[D],B,R[D].valueOf),u(R,'Symbol'),u(Math,'Math',!0),u(o.JSON,'JSON',!0)},function(e,t,n){e.exports=n(16)('native-function-to-string',Function.toString)},function(e,t,n){var o=n(12)('meta'),r=n(8),s=n(6),l=n(5).f,i=0,a=Object.isExtensible||function(){return!0},c=!n(7)(function(){return a(Object.preventExtensions({}))}),p=function(e){l(e,o,{value:{i:'O'+ ++i,w:{}}})},u=e.exports={KEY:o,NEED:!1,fastKey:function(e,t){if(!r(e))return'symbol'==typeof e?e:('string'==typeof e?'S':'P')+e;if(!s(e,o)){if(!a(e))return'F';if(!t)return'E';p(e)}return e[o].i},getWeak:function(e,t){if(!s(e,o)){if(!a(e))return!0;if(!t)return!1;p(e)}return e[o].w},onFreeze:function(e){return c&&u.NEED&&a(e)&&!s(e,o)&&p(e),e}}},function(e,t,n){var o=n(0),r=n(14),s=n(17),l=n(36),i=n(5).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=s?{}:o.Symbol||{});'_'==e.charAt(0)||e in t||i(t,e,{value:l.f(e)})}},function(e,t,n){var o=n(18),r=n(38),s=n(29);e.exports=function(e){var t=o(e),n=r.f;if(n)for(var l,a=n(e),c=s.f,p=0;a.length>p;)c.call(e,l=a[p++])&&t.push(l);return t}},function(e,t,n){var o=n(13);e.exports=Object('z').propertyIsEnumerable(0)?Object:function(e){return'String'==o(e)?e.split(''):Object(e)}},function(e,t,n){var o=n(9),r=n(20),s=n(54);e.exports=function(e){return function(t,n,l){var i,a=o(t),c=r(a.length),p=s(l,c);if(e&&n!=n){for(;c>p;)if(i=a[p++],i!=i)return!0;}else for(;c>p;p++)if((e||p in a)&&a[p]===n)return e||p||0;return!e&&-1}}},function(t,o,r){var s=r(21);t.exports=function(t,o){return t=s(t),0>t?e(t+o,0):n(t,o)}},function(e,t,n){var o=n(13);e.exports=Array.isArray||function(e){return'Array'==o(e)}},function(e,t,n){var o=n(5),r=n(2),s=n(18);e.exports=n(3)?Object.defineProperties:function(e,t){r(e);for(var n,l=s(t),a=l.length,c=0;a>c;)o.f(e,n=l[c++],t[n]);return e}},function(e,t,n){var o=n(9),r=n(41).f,s={}.toString,l='object'==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(e){try{return r(e)}catch(t){return l.slice()}};e.exports.f=function(e){return l&&'[object Window]'==s.call(e)?i(e):r(o(e))}},function(e,t,n){var o=n(29),r=n(15),s=n(9),l=n(25),i=n(6),a=n(33),c=Object.getOwnPropertyDescriptor;t.f=n(3)?c:function(e,t){if(e=s(e),t=l(t,!0),a)try{return c(e,t)}catch(t){}return i(e,t)?r(!o.f.call(e,t),e[t]):void 0}},function(e,t,n){var o=n(5).f,r=Function.prototype,s=/^\s*function ([^ (]*)/,l='name';l in r||n(3)&&o(r,l,{configurable:!0,get:function(){try{return(''+this).match(s)[1]}catch(t){return''}}})},function(e,t,n){n(3)&&'g'!=/./g.flags&&n(5).f(RegExp.prototype,'flags',{configurable:!0,get:n(42)})},function(e,t,n){'use strict';var o=n(2),r=n(20),s=n(30),l=n(22);n(23)('match',1,function(e,t,i,a){return[function(n){var o=e(this),r=n==void 0?void 0:n[t];return r===void 0?new RegExp(n)[t](o+''):r.call(n,o)},function(e){var t=a(i,e,this);if(t.done)return t.value;var c=o(e),p=this+'';if(!c.global)return l(c,p);var u=c.unicode;c.lastIndex=0;for(var d,g=[],f=0;null!==(d=l(c,p));){var n=d[0]+'';g[f]=n,''===n&&(c.lastIndex=s(p,r(c.lastIndex),u)),f++}return 0==f?null:g}]})},function(e,t,n){var o=n(21),r=n(19);e.exports=function(e){return function(t,n){var c,a,p=r(t)+'',s=o(n),i=p.length;return 0>s||s>=i?e?'':void 0:(c=p.charCodeAt(s),55296>c||56319<c||s+1===i||56320>(a=p.charCodeAt(s+1))||57343<a?e?p.charAt(s):c:e?p.slice(s,s+2):(c-55296<<10)+(a-56320)+65536)}}},function(e,t,n){var o=n(13),r=n(1)('toStringTag'),s='Arguments'==o(function(){return arguments}()),l=function(e,t){try{return e[t]}catch(t){}};e.exports=function(e){var t,n,i;return e===void 0?'Undefined':null===e?'Null':'string'==typeof(n=l(t=Object(e),r))?n:s?o(t):'Object'==(i=o(t))&&'function'==typeof t.callee?'Arguments':i}},function(e,t,n){'use strict';var o=n(31);n(10)({target:'RegExp',proto:!0,forced:o!==/./.exec},{exec:o})},function(o,r,s){'use strict';var l=s(2),i=s(43),a=s(20),c=s(21),p=s(30),u=s(22),d=/\$([$&`']|\d\d?|<[^>]*>)/g,g=/\$([$&`']|\d\d?)/g,f=function(e){return e===void 0?e:e+''};s(23)('replace',2,function(o,r,s,h){function y(e,o,r,l,a,n){var c=r+e.length,p=l.length,u=g;return void 0!==a&&(a=i(a),u=d),s.call(n,u,function(s,i){var u;switch(i.charAt(0)){case'$':return'$';case'&':return e;case'`':return o.slice(0,r);case'\'':return o.slice(c);case'<':u=a[i.slice(1,-1)];break;default:var d=+i;if(0==d)return s;if(d>p){var n=t(d/10);return 0===n?s:n<=p?void 0===l[n-1]?i.charAt(1):l[n-1]+i.charAt(1):s}u=l[d-1];}return void 0===u?'':u})}return[function(e,t){var n=o(this),l=e==void 0?void 0:e[r];return l===void 0?s.call(n+'',e,t):l.call(e,n,t)},function(t,o){var r=h(s,t,this,o);if(r.done)return r.value;var d=l(t),g=this+'',m='function'==typeof o;m||(o=o+'');var x=d.global;if(x){var T=d.unicode;d.lastIndex=0}for(var E,S=[];(E=u(d,g),null!==E)&&!(S.push(E),!x);){var b=E[0]+'';''===b&&(d.lastIndex=p(g,a(d.lastIndex),T))}for(var _='',P=0,O=0;O<S.length;O++){E=S[O];for(var i=E[0]+'',I=e(n(c(E.index),g.length),0),k=[],L=1;L<E.length;L++)k.push(f(E[L]));var A=E.groups;if(m){var v=[i].concat(k,I,g);A!==void 0&&v.push(A);var N=o.apply(void 0,v)+''}else N=y(i,g,I,k,A,o);I>=P&&(_+=g.slice(P,I)+N,P=I+i.length)}return _+g.slice(P)}]})},function(e,t,o){'use strict';var r=o(67),s=o(2),l=o(68),a=o(30),c=o(20),u=o(22),i=o(31),p=o(7),d=[].push,g='split',f='length',h='lastIndex',y=4294967295,m=!p(function(){RegExp(y,'y')});o(23)('split',2,function(e,t,o,x){var T;return T='c'=='abbc'[g](/(b)*/)[1]||4!='test'[g](/(?:)/,-1)[f]||2!='ab'[g](/(?:ab)*/)[f]||4!='.'[g](/(.?)(.?)/)[f]||1<'.'[g](/()()/)[f]||''[g](/.?/)[f]?function(e,t){var n=this+'';if(void 0===e&&0===t)return[];if(!r(e))return o.call(n,e,t);for(var s,l,a,c=[],p=(e.ignoreCase?'i':'')+(e.multiline?'m':'')+(e.unicode?'u':'')+(e.sticky?'y':''),u=0,g=void 0===t?y:t>>>0,m=new RegExp(e.source,p+'g');(s=i.call(m,n))&&(l=m[h],!(l>u&&(c.push(n.slice(u,s.index)),1<s[f]&&s.index<n[f]&&d.apply(c,s.slice(1)),a=s[0][f],u=l,c[f]>=g)));)m[h]===s.index&&m[h]++;return u===n[f]?(a||!m.test(''))&&c.push(''):c.push(n.slice(u)),c[f]>g?c.slice(0,g):c}:'0'[g](void 0,0)[f]?function(e,t){return void 0===e&&0===t?[]:o.call(this,e,t)}:o,[function(n,o){var r=e(this),s=void 0==n?void 0:n[t];return void 0===s?T.call(r+'',n,o):s.call(n,r,o)},function(t,r){var d=x(T,t,this,r,T!==o);if(d.done)return d.value;var g=s(t),f=this+'',h=l(g,RegExp),E=g.unicode,S=(g.ignoreCase?'i':'')+(g.multiline?'m':'')+(g.unicode?'u':'')+(m?'y':'g'),b=new h(m?g:'^(?:'+g.source+')',S),_=void 0===r?y:r>>>0;if(0==_)return[];if(0===f.length)return null===u(b,f)?[f]:[];for(var P=0,p=0,O=[];p<f.length;){b.lastIndex=m?p:0;var I,e=u(b,m?f:f.slice(p));if(null===e||(I=n(c(b.lastIndex+(m?0:p)),f.length))===P)p=a(f,p,E);else{if(O.push(f.slice(P,p)),O.length===_)return O;for(var k=1;k<=e.length-1;k++)if(O.push(e[k]),O.length===_)return O;p=P=I}}return O.push(f.slice(P)),O}]})},function(e,t,n){var o=n(8),r=n(13),s=n(1)('match');e.exports=function(e){var t;return o(e)&&((t=e[s])===void 0?'RegExp'==r(e):!!t)}},function(e,t,n){var o=n(2),r=n(35),s=n(1)('species');e.exports=function(e,t){var n,l=o(e).constructor;return l===void 0||(n=o(l)[s])==void 0?t:r(n)}},function(e,t,n){'use strict';var o=n(2),r=n(70),s=n(22);n(23)('search',1,function(e,t,n,l){return[function(n){var o=e(this),r=n==void 0?void 0:n[t];return r===void 0?new RegExp(n)[t](o+''):r.call(n,o)},function(e){var t=l(n,e,this);if(t.done)return t.value;var i=o(e),a=this+'',c=i.lastIndex;r(c,0)||(i.lastIndex=0);var p=s(i,a);return r(i.lastIndex,c)||(i.lastIndex=c),null===p?-1:p.index}]})},function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){var o=n(0),r=n(10),s=n(72),l=[].slice,i=/MSIE .\./.test(s),a=function(e){return function(t,n){var o=2<arguments.length,r=!!o&&l.call(arguments,2);return e(o?function(){('function'==typeof t?t:Function(t)).apply(this,r)}:t,n)}};r(r.G+r.B+r.F*i,{setTimeout:a(o.setTimeout),setInterval:a(o.setInterval)})},function(e,t,n){var o=n(0),r=o.navigator;e.exports=r&&r.userAgent||''},function(e,t,n){var o=n(10),r=n(74);o(o.G+o.B,{setImmediate:r.set,clearImmediate:r.clear})},function(e,t,n){var o,r,s,l=n(34),i=n(75),a=n(40),c=n(24),p=n(0),u=p.process,d=p.setImmediate,g=p.clearImmediate,f=p.MessageChannel,h=p.Dispatch,y=0,m={},x='onreadystatechange',T=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},E=function(e){T.call(e.data)};d&&g||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++y]=function(){i('function'==typeof e?e:Function(e),t)},o(y),y},g=function(e){delete m[e]},'process'==n(13)(u)?o=function(e){u.nextTick(l(T,e,1))}:h&&h.now?o=function(e){h.now(l(T,e,1))}:f?(r=new f,s=r.port2,r.port1.onmessage=E,o=l(s.postMessage,s,1)):p.addEventListener&&'function'==typeof postMessage&&!p.importScripts?(o=function(e){p.postMessage(e+'','*')},p.addEventListener('message',E,!1)):x in c('script')?o=function(e){a.appendChild(c('script'))[x]=function(){a.removeChild(this),T.call(e)}}:o=function(e){setTimeout(l(T,e,1),0)}),e.exports={set:d,clear:g}},function(e){e.exports=function(e,t,n){var o=n===void 0;switch(t.length){case 0:return o?e():e.call(n);case 1:return o?e(t[0]):e.call(n,t[0]);case 2:return o?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return o?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return o?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3]);}return e.apply(n,t)}},function(e,t,n){for(var o=n(77),r=n(18),s=n(11),l=n(0),a=n(4),c=n(32),p=n(1),u=p('iterator'),d=p('toStringTag'),g=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=r(f),y=0;y<h.length;y++){var i,m=h[y],x=f[m],T=l[m],E=T&&T.prototype;if(E&&(E[u]||a(E,u,g),E[d]||a(E,d,m),c[m]=g,x))for(i in o)E[i]||s(E,i,o[i],!0)}},function(e,t,n){'use strict';var o=n(78),r=n(79),s=n(32),l=n(9);e.exports=n(80)(Array,'Array',function(e,t){this._t=l(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):'keys'==t?r(0,n):'values'==t?r(0,e[n]):r(0,[n,e[n]])},'values'),s.Arguments=s.Array,o('keys'),o('values'),o('entries')},function(e,t,n){var o=n(1)('unscopables'),r=Array.prototype;r[o]==void 0&&n(4)(r,o,{}),e.exports=function(e){r[o][e]=!0}},function(e){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){'use strict';var o=n(17),r=n(10),s=n(11),l=n(4),i=n(32),a=n(81),c=n(26),p=n(82),u=n(1)('iterator'),d=!([].keys&&'next'in[].keys()),g='keys',f='values',h=function(){return this};e.exports=function(e,t,n,y,m,x,T){a(n,t,y);var E,S,b,_=function(e){return!d&&e in k?k[e]:e===g?function(){return new n(this,e)}:e===f?function(){return new n(this,e)}:function(){return new n(this,e)}},P=t+' Iterator',O=m==f,I=!1,k=e.prototype,L=k[u]||k['@@iterator']||m&&k[m],A=L||_(m),v=m?O?_('entries'):A:void 0,N='Array'==t?k.entries||L:L;if(N&&(b=p(N.call(new e)),b!==Object.prototype&&b.next&&(c(b,P,!0),!o&&'function'!=typeof b[u]&&l(b,u,h))),O&&L&&L.name!==f&&(I=!0,A=function(){return L.call(this)}),(!o||T)&&(d||I||!k[u])&&l(k,u,A),i[t]=A,i[P]=h,m)if(E={values:O?A:_(f),keys:x?A:_(g),entries:v},T)for(S in E)S in k||s(k,S,E[S]);else r(r.P+r.F*(d||I),t,E);return E}},function(e,t,n){'use strict';var o=n(39),r=n(15),s=n(26),l={};n(4)(l,n(1)('iterator'),function(){return this}),e.exports=function(e,t,n){e.prototype=o(l,{next:r(1,n)}),s(e,t+' Iterator')}},function(e,t,n){var o=n(6),r=n(43),s=n(27)('IE_PROTO'),l=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),o(e,s)?e[s]:'function'==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=n(84),r=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(44);t.default=class{constructor({send:e,file:t,reqId:n}){this.send=e,this.file=t,this.reqId=n;const o=t.buffer;this.checksum=(0,r.default)(Array.from(o)),this.size=o.length}requestUpload(){var e=this.file;const t=e.documentType,n=e.documentFormat,o=e.documentId,r=e.expirationDate,s=e.lifetimeValid,l=e.pageType,i=e.buffer,a=e.proof_of_ownership,c=e.document_issuing_country,p=Object.assign(this.file.passthrough||{},{document_upload:!0}),u={req_id:this.reqId,passthrough:p,document_upload:1,document_type:t,document_format:n.toUpperCase(),expiration_date:r,document_id:o,file_size:i.length,expected_checksum:this.checksum};l&&(u.page_type=l),s&&(u.lifetime_valid=s),a&&(u.proof_of_ownership=a),c&&(u.document_issuing_country=c),this.send(JSON.stringify(u))}handleMessage({error:e,document_upload:t,passthrough:n}){if(e)return{warning:e.code,message:e.message,passthrough:n};const o=t.checksum,r=t.size,l=t.upload_id,i=t.call_type;if(!o)return void this.startBinaryUpload(Object.assign({},this.file,{uploadId:l,callType:i}));if(r!==this.size)throw(0,s.createError)('SizeMismatch','File size does not match',n);if(o!==this.checksum)throw(0,s.createError)('ChecksumMismatch','Checksum does not match',n);return{document_upload:t,passthrough:n}}startBinaryUpload(e){for(var t=(0,s.addMetadata)((0,s.generateChunks)(e.buffer,e),e),n=(e)=>this.send(e),o=0;o<t.length;o++)n(t[o],o,t)}}},function(e,t,n){(function(){var t=n(85),o=n(45).utf8,r=n(86),s=n(45).bin,l=function(e,n){e.constructor==String?n&&'binary'===n.encoding?e=s.stringToBytes(e):e=o.stringToBytes(e):r(e)?e=Array.prototype.slice.call(e,0):!Array.isArray(e)&&(e=e.toString());for(var p=t.bytesToWords(e),u=8*e.length,g=1732584193,a=-271733879,f=-1732584194,c=271733878,d=0;d<p.length;d++)p[d]=16711935&(p[d]<<8|p[d]>>>24)|4278255360&(p[d]<<24|p[d]>>>8);p[u>>>5]|=128<<u%32,p[(u+64>>>9<<4)+14]=u;for(var i=l._ff,h=l._gg,y=l._hh,m=l._ii,d=0;d<p.length;d+=16){var x=g,T=a,E=f,S=c;g=i(g,a,f,c,p[d+0],7,-680876936),c=i(c,g,a,f,p[d+1],12,-389564586),f=i(f,c,g,a,p[d+2],17,606105819),a=i(a,f,c,g,p[d+3],22,-1044525330),g=i(g,a,f,c,p[d+4],7,-176418897),c=i(c,g,a,f,p[d+5],12,1200080426),f=i(f,c,g,a,p[d+6],17,-1473231341),a=i(a,f,c,g,p[d+7],22,-45705983),g=i(g,a,f,c,p[d+8],7,1770035416),c=i(c,g,a,f,p[d+9],12,-1958414417),f=i(f,c,g,a,p[d+10],17,-42063),a=i(a,f,c,g,p[d+11],22,-1990404162),g=i(g,a,f,c,p[d+12],7,1804603682),c=i(c,g,a,f,p[d+13],12,-40341101),f=i(f,c,g,a,p[d+14],17,-1502002290),a=i(a,f,c,g,p[d+15],22,1236535329),g=h(g,a,f,c,p[d+1],5,-165796510),c=h(c,g,a,f,p[d+6],9,-1069501632),f=h(f,c,g,a,p[d+11],14,643717713),a=h(a,f,c,g,p[d+0],20,-373897302),g=h(g,a,f,c,p[d+5],5,-701558691),c=h(c,g,a,f,p[d+10],9,38016083),f=h(f,c,g,a,p[d+15],14,-660478335),a=h(a,f,c,g,p[d+4],20,-405537848),g=h(g,a,f,c,p[d+9],5,568446438),c=h(c,g,a,f,p[d+14],9,-1019803690),f=h(f,c,g,a,p[d+3],14,-187363961),a=h(a,f,c,g,p[d+8],20,1163531501),g=h(g,a,f,c,p[d+13],5,-1444681467),c=h(c,g,a,f,p[d+2],9,-51403784),f=h(f,c,g,a,p[d+7],14,1735328473),a=h(a,f,c,g,p[d+12],20,-1926607734),g=y(g,a,f,c,p[d+5],4,-378558),c=y(c,g,a,f,p[d+8],11,-2022574463),f=y(f,c,g,a,p[d+11],16,1839030562),a=y(a,f,c,g,p[d+14],23,-35309556),g=y(g,a,f,c,p[d+1],4,-1530992060),c=y(c,g,a,f,p[d+4],11,1272893353),f=y(f,c,g,a,p[d+7],16,-155497632),a=y(a,f,c,g,p[d+10],23,-1094730640),g=y(g,a,f,c,p[d+13],4,681279174),c=y(c,g,a,f,p[d+0],11,-358537222),f=y(f,c,g,a,p[d+3],16,-722521979),a=y(a,f,c,g,p[d+6],23,76029189),g=y(g,a,f,c,p[d+9],4,-640364487),c=y(c,g,a,f,p[d+12],11,-421815835),f=y(f,c,g,a,p[d+15],16,530742520),a=y(a,f,c,g,p[d+2],23,-995338651),g=m(g,a,f,c,p[d+0],6,-198630844),c=m(c,g,a,f,p[d+7],10,1126891415),f=m(f,c,g,a,p[d+14],15,-1416354905),a=m(a,f,c,g,p[d+5],21,-57434055),g=m(g,a,f,c,p[d+12],6,1700485571),c=m(c,g,a,f,p[d+3],10,-1894986606),f=m(f,c,g,a,p[d+10],15,-1051523),a=m(a,f,c,g,p[d+1],21,-2054922799),g=m(g,a,f,c,p[d+8],6,1873313359),c=m(c,g,a,f,p[d+15],10,-30611744),f=m(f,c,g,a,p[d+6],15,-1560198380),a=m(a,f,c,g,p[d+13],21,1309151649),g=m(g,a,f,c,p[d+4],6,-145523070),c=m(c,g,a,f,p[d+11],10,-1120210379),f=m(f,c,g,a,p[d+2],15,718787259),a=m(a,f,c,g,p[d+9],21,-343485551),g=g+x>>>0,a=a+T>>>0,f=f+E>>>0,c=c+S>>>0}return t.endian([g,a,f,c])};l._ff=function(e,o,r,l,i,a,s){var t=e+(o&r|~o&l)+(i>>>0)+s;return(t<<a|t>>>32-a)+o},l._gg=function(e,o,r,l,i,a,s){var t=e+(o&l|r&~l)+(i>>>0)+s;return(t<<a|t>>>32-a)+o},l._hh=function(e,o,r,l,i,a,s){var t=e+(o^r^l)+(i>>>0)+s;return(t<<a|t>>>32-a)+o},l._ii=function(e,o,r,l,i,a,s){var t=e+(r^(o|~l))+(i>>>0)+s;return(t<<a|t>>>32-a)+o},l._blocksize=16,l._digestsize=16,e.exports=function(e,n){if(e===void 0||null===e)throw new Error('Illegal argument '+e);var o=t.wordsToBytes(l(e,n));return n&&n.asBytes?o:n&&n.asString?s.bytesToString(o):t.bytesToHex(o)}})()},function(e){(function(){var n='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',o={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&o.rotl(e,8)|4278255360&o.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=o.endian(e[t]);return e},randomBytes:function(e){for(var n=[];0<e;e--)n.push(t(256*Math.random()));return n},bytesToWords:function(e){for(var t=[],n=0,o=0;n<e.length;n++,o+=8)t[o>>>5]|=e[n]<<24-o%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(255&e[n>>>5]>>>24-n%32);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join('')},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t,o=[],r=0;r<e.length;r+=3){t=e[r]<<16|e[r+1]<<8|e[r+2];for(var s=0;4>s;s++)8*r+6*s<=8*e.length?o.push(n.charAt(63&t>>>6*(3-s))):o.push('=')}return o.join('')},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/ig,'');for(var t=[],o=0,r=0;o<e.length;r=++o%4)0!=r&&t.push((n.indexOf(e.charAt(o-1))&Math.pow(2,-2*r+8)-1)<<2*r|n.indexOf(e.charAt(o))>>>6-2*r);return t}};e.exports=o})()},function(e){function t(e){return!!e.constructor&&'function'==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function n(e){return'function'==typeof e.readFloatLE&&'function'==typeof e.slice&&t(e.slice(0,0))}e.exports=function(e){return null!=e&&(t(e)||n(e)||!!e._isBuffer)}}])['default']});